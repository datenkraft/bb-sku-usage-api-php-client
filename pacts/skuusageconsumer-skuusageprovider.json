{
  "consumer": {
    "name": "skuusageConsumer"
  },
  "provider": {
    "name": "skuusageProvider"
  },
  "interactions": [
    {
      "description": "Successful POST request to /sku-usage",
      "providerState": "A SKU with skuId exists, the combination of projectId and externalId is unique, the request is valid, the token is valid and has a valid scope",
      "request": {
        "method": "POST",
        "path": "/sku-usage",
        "headers": {
          "Authorization": "Bearer valid_token",
          "Content-Type": "application/json"
        },
        "body": {
          "skuId": "skuId_test",
          "quantity": 1,
          "projectId": "projectId_test",
          "usageStart": "2021-04-09T07:04:32+00:00",
          "usageEnd": "2021-04-10T07:04:32+00:00",
          "externalId": "externalId_test",
          "meta": {
            "amount": 10000,
            "currency": "EUR",
            "description": "Test description"
          }
        }
      },
      "response": {
        "status": 201,
        "headers": {
          "Content-Type": "application/json"
        },
        "body": {
          "skuUsageId": 1,
          "skuId": "skuId_test",
          "quantity": 1,
          "projectId": "projectId_test",
          "usageStart": "2021-04-09T07:04:32+00:00",
          "usageEnd": "2021-04-10T07:04:32+00:00",
          "externalId": "externalId_test",
          "meta": {
            "amount": 10000,
            "currency": "EUR",
            "description": "Test description"
          }
        }
      }
    },
    {
      "description": "Unauthorized POST request to /sku-usage",
      "providerState": "The token is invalid",
      "request": {
        "method": "POST",
        "path": "/sku-usage",
        "headers": {
          "Authorization": "Bearer invalid_token",
          "Content-Type": "application/json"
        },
        "body": {
          "skuId": "skuId_test",
          "quantity": 1,
          "projectId": "projectId_test",
          "usageStart": "2021-04-09T07:04:32+00:00",
          "usageEnd": "2021-04-10T07:04:32+00:00",
          "externalId": "externalId_test",
          "meta": {
            "amount": 10000,
            "currency": "EUR",
            "description": "Test description"
          }
        }
      },
      "response": {
        "status": 401,
        "headers": {
          "Content-Type": "application/json"
        },
        "body": {
          "errors": [
            {
              "code": "401",
              "message": "Example error message"
            }
          ]
        }
      }
    },
    {
      "description": "Forbidden POST request to /sku-usage",
      "providerState": "A SKU with skuId exists, the request is valid, the token is valid with an invalid scope",
      "request": {
        "method": "POST",
        "path": "/sku-usage",
        "headers": {
          "Authorization": "Bearer valid_token_invalid_scope",
          "Content-Type": "application/json"
        },
        "body": {
          "skuId": "skuId_test",
          "quantity": 1,
          "projectId": "projectId_test",
          "usageStart": "2021-04-09T07:04:32+00:00",
          "usageEnd": "2021-04-10T07:04:32+00:00",
          "externalId": "externalId_test",
          "meta": {
            "amount": 10000,
            "currency": "EUR",
            "description": "Test description"
          }
        }
      },
      "response": {
        "status": 403,
        "headers": {
          "Content-Type": "application/json"
        },
        "body": {
          "errors": [
            {
              "code": "403",
              "message": "Example error message"
            }
          ]
        }
      }
    },
    {
      "description": "Bad POST request to /sku-usage",
      "providerState": "The request body is invalid or missing",
      "request": {
        "method": "POST",
        "path": "/sku-usage",
        "headers": {
          "Authorization": "Bearer valid_token"
        },
        "body": "Bad request"
      },
      "response": {
        "status": 400,
        "headers": {
          "Content-Type": "application/json"
        },
        "body": {
          "errors": [
            {
              "code": "400",
              "message": "Example error message"
            }
          ]
        }
      }
    },
    {
      "description": "POST request to /sku-usage with non-existent skuId",
      "providerState": "The SKU with skuId does not exist",
      "request": {
        "method": "POST",
        "path": "/sku-usage",
        "headers": {
          "Authorization": "Bearer valid_token",
          "Content-Type": "application/json"
        },
        "body": {
          "skuId": "skuId_test_invalid",
          "quantity": 1,
          "projectId": "projectId_test",
          "usageStart": "2021-04-09T07:04:32+00:00",
          "usageEnd": "2021-04-10T07:04:32+00:00",
          "externalId": "externalId_test",
          "meta": {
            "amount": 10000,
            "currency": "EUR",
            "description": "Test description"
          }
        }
      },
      "response": {
        "status": 422,
        "headers": {
          "Content-Type": "application/json"
        },
        "body": {
          "errors": [
            {
              "code": "422",
              "message": "Example error message",
              "extra": {
                "externalId": "externalId_test"
              }
            }
          ]
        }
      }
    },
    {
      "description": "POST request to /sku-usage with already existent combination of projectId and externalId",
      "providerState": "The combination of projectId and externalId already exists",
      "request": {
        "method": "POST",
        "path": "/sku-usage",
        "headers": {
          "Authorization": "Bearer valid_token",
          "Content-Type": "application/json"
        },
        "body": {
          "skuId": "skuId_test",
          "quantity": 1,
          "projectId": "projectId_test_duplicate",
          "usageStart": "2021-04-09T07:04:32+00:00",
          "usageEnd": "2021-04-10T07:04:32+00:00",
          "externalId": "projectId_test_duplicate",
          "meta": {
            "amount": 10000,
            "currency": "EUR",
            "description": "Test description"
          }
        }
      },
      "response": {
        "status": 409,
        "headers": {
          "Content-Type": "application/json"
        },
        "body": {
          "errors": [
            {
              "code": "409",
              "message": "Example error message",
              "extra": {
                "externalId": "projectId_test_duplicate"
              }
            }
          ]
        }
      }
    }
  ],
  "metadata": {
    "pactSpecification": {
      "version": "2.0.0"
    }
  }
}